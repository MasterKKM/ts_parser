Информация
----------

Это простой грабер/парсер данных с сайта "Работа Всем", проект был сделан по просьбе одного хорошего человека, так как
ему треболвалось составлять отчеты на базе информации с этого сайта, а получение данных официальным способом, требует
работы с огромными xml файлами причем, нужная информация в них составляла примерно 10% от их содержимого.

Для публикации код управление большим хранилищем, а так-же генератор отчетов и статистики удалеы, так как содержит
какую-то страшную тайну (мне так не кажется, но заказчик думает, что стдержит). Показываемая статистике - это то, что
мне показалось интересным. :)

Инсталяция
----------

Это простое базовое приложения Yii2 не требующее ничего оригинального, устанавливается типично, пароли пользователей
заносятся в app\models\User::$users городить что-либо сложнее для одного (в перспективе двух) пользователей смысла нет.

Скачиваем с гита стандартным образуом в нужную папку, затем с помощью композера грузим нужные модули:

    composer instal

После чего прописываем в файле конфигурации (`config/prod/db.php` для породакшена, или `config/db.php` для тестового)
настройки базы данных и загружаем миграции:

    ./yii migration

Для удобства разработки/доработки сделан файл для использоваения докера с его композером. Для работы с ним менять
настройки связи с базой данных не нужно. Можно запустить следующим образом:

    docker-compose up -d

Подключиться к контейнеру:

    docker exec -it php_parser /bin/bash

И выполнить аналогичные настройки:

    composer instal
    ./yii migration

Использование
-------------

Настройка загрузки допускает выбор области, выбор обновлять/не обновлять данные при повторной загрузке поверх
существующих, номера страницы с которой начинать загрузку (для отладки), длительности паузы между десятками данных о
кол-ве вакансий. Настройка осуществляется в файле `config/console.php` `components.container.definitions.Loader`:

            'Loader' => [
                'class' => 'app\models\console\Loader', // Класс-загрузчик
                'startPage' => 0,                       // Начать с нулевой страницы (грузить все)
                'region' => '7600000000000',            // Код региона, в данном случае Ярославская область.
                'updateOnChanged' => true,              // При совпадении кодов объектов, обновлять данные.
                'pageSize' => 50,                       // Загружать вакансии страницами по 50 записей.
                'sleepTime' => 2,                       // При загрузке кол-ва рабочих мест пауза между запросами 2 сек.
                'clearOnStart' => true,                 // Очищать базу перед началом загрузки.
            ],

Загрузка вакансий может осуществлятся либо командой

    ./yii parser/all

Тогда последовательно заружается сразу оба этапа, либо в два этапа - вначале загружаются сами вакансии, командой:

    ./yii parser/base

Затем загружаются данные о числе рабочих мест, получаемые не документрированным способом:

    ./yii parser/places

Раздельная загрузка связана с тем, что загрузка идет достаточно долго, а недокументированный способ получения данных
(`./yii parser/places`) иногда дает сбои. В случае сбоев при загрузке необходимо просто повторно запустить ее (пропуск
уже загруженных данных идет автоматически). В случае частых сбоев нужно увеличить паузу `sleepTime`.

Просмотр скачанных данных осуществляется через веб-интерфейс. Отчеты, статистика и объдиненное хранилище являются тайной
заказчика, по этому удалены, Та примитивная статистика которая там реализовано - моё проявившееся любопытство.
